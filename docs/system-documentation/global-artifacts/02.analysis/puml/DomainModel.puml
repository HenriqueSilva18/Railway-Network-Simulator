@startuml
skinparam monochrome true
skinparam shadowing false
skinparam classAttributeIconSize 0
hide circle
hide methods

' Layout optimization
left to right direction

' ====== User Entities ======

  class Editor {
    username
    password
    createdMaps
    createdScenarios
  }

  class Player {
    username
    password
    budget
  }

' ====== Core Game Elements ======

  class Map {
    nameID
    width
    height
  }

  class Scenario {
    nameID
    timePeriod
    technologicalRestrictions
    historicalEvents
  }

  class HouseBlock {
    xAxis
    yAxis
  }

  class City {
    name
    xAxis
    yAxis
  }



  ' Added from Industry System
  abstract class Industry {
    name
    xAxis
    yAxis
  }

  class PrimarySectorIndustry {
    resourceType
    generationRate
  }

  class TransformingIndustry {
    requiredResources
    productionRate
  }

  class Port {
    importCargos
    exportCargos
    transformCapabilities
  }


  Industry <|-- PrimarySectorIndustry
  Industry <|-- TransformingIndustry
  Industry <|-- Port

  ' Added from Economy
  class Cargo {
    amount
    lifespan
  }

  class Resource {
    name
    amount
    lifespan
  }

  class Product {
    amount
    lifespan
  }

  enum ResourceType {
    COAL
    IRON_ORE
    BAUXITE
    NITRATE
    VEGETABLES
    CEREALS
    WOOL
    COFFEE
    RUBBER
    CATTLE
  }

  enum ProductType {
    STEEL
    CARS
    TEXTILES
    FOOD
  }

  enum ServiceType {
    PASSENGERS
    MAIL
  }

  Cargo <|-- Resource
  Cargo <|-- Product
  Resource "1" -- "1" ResourceType : is of type >
  Product "1" -- "1" ProductType : is of type >



' ====== Railway Network ======

  enum StationType {
    DEPOT
    STATION
    TERMINAL
  }

  class Station {
    name
    xAxis
    yAxis
    type: StationType
    radius
    cost
  }

  ' Building category enum
  enum BuildingCategory {
    COMMUNICATION
    CATERING
    ACCOMMODATION
    STORAGE
    ADMINISTRATION
  }

  ' Modified Building Class
  class Building {
    name
    upgradeLevel
    availableYear
    cost
    effect
  }

  ' Station building slots
  class StationBuildingSlot {
    category: BuildingCategory
    upgradeDate
  }

  enum TrackType {
    SINGLE
    DOUBLE
    SINGLE_ELECTRIFIED
    DOUBLE_ELECTRIFIED
  }

  class RailwayLine {
    length
    type: TrackType
    cost
  }

  enum LocomotiveType {
    STEAM
    DIESEL
    ELECTRIC
  }

  class Locomotive {
    name
    type: LocomotiveType
    power
    acceleration
    topSpeed
    startYear
    fuelCost
    maintenanceCost
    price
  }

  class Train {
    name
  }

  class Carriage {
    cargoType
  }

  class Route {
    name
    sequence
  }

  class StationCargoPickup {
    amount
  }


' ====== Core Relationships ======
' Creation relationships
Editor "1" -- "*" Map : creates >
Editor "1" -- "*" Scenario : creates >
Scenario "1" -- "1" Map : uses >
Editor "1" -- "*" City: adds >

' Map elements
Map "1" -- "*" Industry : contains >
Map "1" -- "*" City : contains >

' City relationships
City "1" -- "*" HouseBlock : contains >

' Player actions
Player "1" -- "*" Station : builds >
Player "1" -- "*" RailwayLine : builds >
Player "1" -- "*" Train : buys >
Player "1" -- "*" Route : creates >

' Station relationships - Modified
Station "1" -- "1..*" StationBuildingSlot : has >
StationBuildingSlot "1" -- "0..1" Building : contains >
Building "1" -- "0..1" Building : upgrades to >
StationBuildingSlot -- BuildingCategory : is of category >
Station "0..1" -- "*" City : serves >
Station "0..1" -- "*" Industry : serves >
Station "1" -- "*" Cargo : stores >

' Railway network
RailwayLine "1" -- "2" Station : connects >
Train "1" -- "1" Locomotive : has >
Train "1" -- "*" Carriage : has >
Train "1" -- "0..1" Route : assigned to >
Train "1" -- "*" Cargo : transports >

' Routes and stations
Route "1" -- "*" StationCargoPickup : includes >
StationCargoPickup "1" -- "1" Station : at >
StationCargoPickup "1" -- "1" Cargo : specifies >
Station "*" -- "*" Route : included in >

' Scenario restrictions
Scenario "*" -- "*" Locomotive : restricts >
Scenario "1" -- "*" Port : configures >

' ====== Production Chain Relationships ======
' Resource generation
PrimarySectorIndustry "1" -- "*" Resource : generates >
City "1" -- "*" ServiceType : generates >

' Resource transformation
TransformingIndustry "*" -- "*" Resource : consumes >
TransformingIndustry "1" -- "*" Product : produces >

' Consumption
City "*" -- "*" Product : consumes >
City "*" -- "*" ServiceType : consumes >

' Port's special role
Port "*" -- "*" Resource : imports/exports >
Port "*" -- "*" Product : imports/exports >
Port "*" -- "*" Resource : transforms >
Port "*" -- "*" Product : produces >

Station "*" -- "1" StationType : has >
RailwayLine "*" -- "1" TrackType : is >
Locomotive "*" -- "1" LocomotiveType : is >

@enduml