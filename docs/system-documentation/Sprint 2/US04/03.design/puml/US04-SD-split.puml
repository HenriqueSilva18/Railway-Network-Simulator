@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Editor" as EDITOR
participant ":CreateScenarioUI" as UI
participant ":CreateScenarioController" as CTRL
participant "scenario\n:Scenario" as SCENARIO

activate EDITOR

    EDITOR -> UI : asks to create a scenario
    activate UI
        UI --> CTRL** : create()

        UI -> CTRL : getMaps()
        ref over CTRL
            Get Maps List
        end ref

        activate CTRL
            CTRL --> UI : mapsList
        deactivate CTRL

        UI --> EDITOR : shows map list and asks to select one
    deactivate UI

    EDITOR -> UI : selects a map
    activate UI
        UI --> EDITOR : requests name, start and end date (time period)
    deactivate UI

    EDITOR -> UI : types requested data
    activate UI
        UI -> CTRL : getAvailableIndustries(startDate, endDate)
        ref over CTRL
            Get Available Industries
        end ref

        activate CTRL
            CTRL --> UI : availableIndustriesList
        deactivate CTRL

        UI --> EDITOR : shows a list of industries and asks to select the ones available in the scenario
    deactivate UI

    EDITOR -> UI : selects the available industries in the scenario
    activate UI
        UI -> CTRL : getAvailableCargoes()
        ref over CTRL
            Get Available Cargoes
        end ref

        activate CTRL
            CTRL --> UI : availableCargoesList
        deactivate CTRL

        loop for each selected industry that is a port (mixed industries)
            UI --> EDITOR : shows a list of cargoes and asks to select the ones the port import
            deactivate UI

            EDITOR -> UI : selects the cargoes the port import
            activate UI
                UI --> EDITOR : shows a list of cargoes and asks to select the ones the port export
            deactivate UI

            EDITOR -> UI : selects the cargoes the port export
            activate UI
                UI --> EDITOR : shows a list of cargoes and asks to select the ones the port transform
            deactivate UI

            EDITOR -> UI : selects the cargoes the port transform
            activate UI
        end

        loop for each industry
            UI --> EDITOR : requests the industry generation frequency factor
            deactivate UI

            EDITOR -> UI : types the industry generation factor
            activate UI
        end

        UI -> CTRL : getLocomotiveTypes()
        ref over CTRL
            Get Locomotive Types
        end ref

        activate CTRL
            CTRL --> UI : locomotiveTypeList
        deactivate CTRL

        UI --> EDITOR : shows a list of locomotive types and asks to select the available ones
    deactivate UI

    EDITOR -> UI : selects the available locomotive types
    activate UI
        UI --> EDITOR : shows all data and requests confirmation
    deactivate UI

    EDITOR -> UI : confirms data
    activate UI
        UI -> CTRL : createScenario(nameID, startDate, endDate, mapID, selectedIndustries, \nportImports, portExports, portTransforms, industryGenerationFactors, selectedLocomotiveTypes)
        activate CTRL
            CTRL -> CTRL : getEditorFromSession()
            ref over CTRL
                Get Editor From Session
            end ref

            activate CTRL
                CTRL --> CTRL : editor
            deactivate CTRL

            ref over CTRL, SCENARIO
                Create Scenario
            end ref

            CTRL --> UI : scenario
        deactivate CTRL

        UI --> EDITOR : displays operation success
    deactivate UI

deactivate EDITOR

@enduml 