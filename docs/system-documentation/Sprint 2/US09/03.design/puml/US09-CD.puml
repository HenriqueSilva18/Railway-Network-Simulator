@startuml
'skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
'skinparam linetype orto

skinparam classAttributeIconSize 0

'left to right direction

class ApplicationSession {
    - ApplicationSession()
    + {static} getInstance()
    + getCurrentSession()
    + getCurrentScenario()
    + getCurrentDate()
}

class UserSession {
    + getUsername()
}

class Player {
    - username : String
    - password : String
    - initialBudget : double
    - currentBudget : double
    - ownedLocomotives : List<Locomotive>
    
    + hasSufficientMoney(price)
    + removeMoney(amount)
    + addLocomotive(locomotive)
}

class Locomotive {
    - nameID : String
    - owner : Player
    - type : String
    - power : double
    - acceleration : double
    - topSpeed : double
    - startYear : int
    - fuelCost : double
    - availabilityYear : int
    - acquisitionPrice : double
    - maintenancePrice : double
    
    + getPrice()
    + setOwner(player)
}

class Scenario {
    - nameID : String
    - editor : Editor
    - startDate : Date
    - endDate : Date
    - tweakedCityList : List<City>
    - availableIndustryList : List<Industry>
    - availableLocomotives : List<Locomotive>
    
    + getAvailableLocomotives(scenario, date)
}

class LocomotiveRepository {
    + getLocomotive(locomotiveID)
}

class PlayerRepository {
    + getPlayerByUsername(username)
}

class ScenarioRepository {
    + getCurrentScenario()
}

class Repositories {
    - Repositories()
    + {static} getInstance()
    + getLocomotiveRepository()
    + getPlayerRepository()
    + getScenarioRepository()
}

class BuyLocomotiveController {
    + BuyLocomotiveController()
    + getAvailableLocomotives()
    + getLocomotive(locomotiveID)
    + purchaseLocomotive(locomotive)
    - getCurrentScenarioAndDate()
    - getPlayerFromSession()
    - checkBalance(price, player)
}

class BuyLocomotiveUI {
}

BuyLocomotiveUI .> BuyLocomotiveController

BuyLocomotiveController ..> ApplicationSession
BuyLocomotiveController ..> UserSession
BuyLocomotiveController ..> Locomotive
BuyLocomotiveController ..> LocomotiveRepository
BuyLocomotiveController ..> Player
BuyLocomotiveController ..> PlayerRepository
BuyLocomotiveController ..> Scenario
BuyLocomotiveController ..> ScenarioRepository
BuyLocomotiveController .> Repositories

Repositories -> "1" Repositories : instance
Repositories --> "1" LocomotiveRepository : locomotiveRepository
Repositories --> "1" PlayerRepository : playerRepository
Repositories --> "1" ScenarioRepository : scenarioRepository

ApplicationSession -> "1" ApplicationSession : instance
ApplicationSession ..> UserSession

LocomotiveRepository --> "*" Locomotive : locomotives
PlayerRepository --> "*" Player : players
ScenarioRepository --> "*" Scenario : scenarios

Player --> "*" Locomotive : ownedLocomotives
Scenario --> "*" Locomotive : availableLocomotives

@enduml
