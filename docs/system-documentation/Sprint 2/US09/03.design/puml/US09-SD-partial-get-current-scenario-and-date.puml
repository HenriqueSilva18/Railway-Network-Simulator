@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

participant ":BuyLocomotiveController" as CTRL
participant "Repositories" as REPOS
participant "repositories\n:Repositories" as REPOS_SINGLETON
participant "ApplicationSession" as APP_SESSION
participant "appSession\n:ApplicationSession" as APP_SESSION_SINGLETON

autonumber 3
-> CTRL : getCurrentScenarioAndDate()

autonumber 3.1
activate CTRL
    group Get Current Scenario and Date
        CTRL -> REPOS : getInstance()
        activate REPOS
            REPOS --> CTRL: repositories
        deactivate REPOS

        CTRL -> APP_SESSION : getInstance()
        activate APP_SESSION
            APP_SESSION --> CTRL : appSession
        deactivate APP_SESSION

        CTRL -> APP_SESSION_SINGLETON : getCurrentSession()
        activate APP_SESSION_SINGLETON
            APP_SESSION_SINGLETON --> CTRL : currentSession
        deactivate APP_SESSION_SINGLETON

        CTRL -> REPOS_SINGLETON : getScenarioRepository()
        activate REPOS_SINGLETON
            REPOS_SINGLETON --> CTRL: scenarioRepository
        deactivate REPOS_SINGLETON

        CTRL -> REPOS_SINGLETON : getCurrentScenario()
        activate REPOS_SINGLETON
            REPOS_SINGLETON --> CTRL : currentScenario
        deactivate REPOS_SINGLETON

        CTRL -> REPOS_SINGLETON : getCurrentDate()
        activate REPOS_SINGLETON
            REPOS_SINGLETON --> CTRL : currentDate
        deactivate REPOS_SINGLETON
    end

    autonumber 3.13
    <-- CTRL : currentScenario, currentDate
deactivate CTRL

@enduml 