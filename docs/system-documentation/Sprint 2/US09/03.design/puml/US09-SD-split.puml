@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Player" as PLAYER
participant ":BuyLocomotiveUI" as UI
participant ":BuyLocomotiveController" as CTRL

activate PLAYER

    PLAYER -> UI : asks to buy a locomotive
    activate UI
        UI --> CTRL** : create()
        UI -> CTRL : getAvailableLocomotives()
        
        ref over CTRL
            Get Current Scenario and Date
        end ref

        ref over CTRL
            Get Available Locomotives
        end ref

        activate CTRL
            CTRL --> UI : availableLocomotives
        deactivate CTRL

        UI --> PLAYER : shows a list of available locomotives (for the scenario and current date)
    deactivate UI

    PLAYER -> UI : selects a locomotive
    activate UI
        UI -> CTRL : getLocomotive(locomotiveID)
        
        ref over CTRL
            Get Locomotive
        end ref

        activate CTRL
            CTRL --> UI : locomotive
        deactivate CTRL

        UI --> PLAYER : shows locomotive details and requests confirmation
    deactivate UI

    PLAYER -> UI : confirms purchase
    activate UI
        UI -> CTRL : purchaseLocomotive(locomotive)
        
        ref over CTRL
            Get Player From Session
        end ref

        ref over CTRL
            Purchase Locomotive
        end ref

        activate CTRL
            CTRL --> UI : true
        deactivate CTRL

        UI --> PLAYER : displays operation success
    deactivate UI

deactivate PLAYER

@enduml
