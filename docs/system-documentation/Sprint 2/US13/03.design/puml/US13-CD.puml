@startuml
'skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
'skinparam linetype orto

skinparam classAttributeIconSize 0

'left to right direction

class ApplicationSession
{
    - ApplicationSession()
    + {static} getInstance()
    + getCurrentSession()
}

class UserSession
{
    + getUserEmail()
}

class Employee {
    - name : String
    - email : String
    - position : String
    - phone : String
}

class Task {
    - reference :String
    - description : String
    - informalDescription : String
    - technicalDescription : String
    - duration : int
    - cost : double

    + Task(reference, description,\ninformalDescription, technicalDescription,\nduration, cost, taskCategory, createdBy)
}

class TaskCategory {
    - description : String
}

class Organization {
    - name : String
    - vatNumber : String
    - website : String
    - phone : String
    - email : String

    + Organization(name, vatNumber, webSite, phone, email, postalAddress, manager)
    + anyEmployeeHasEmail(email)
    + getEmployeeByEmail(email)
    + createTask(reference, description, informalDesccription, technicalDescription, \nduration, cost, taskCategory, employee)
    - addTask(task)
    - validateTask(task)
}

class TaskCategoryRepository {
    + getTaskCategories()
    + getTaskCategoryByDescription(taskCategoryDescription)
}

class OrganizationRepository {
    + getOrganizationByEmployeeEmail(email)
}

class Repositories {
    - Repositories()
    + {static} getInstance()
    + getTaskCategoryRepository()
    + getOrganizationRepository()
}

class CreateTaskController {
    + CreateTaskController()
    + getTaskCategories()
    + createTask(reference, description, informalDescription, \n   technicalDescription, duration, cost, taskCategoryDescription)
    - getTaskCategoryByDescription(taskCategoryDescription)
    - getEmployeeFromSession()
}

note right of CreateTaskController
    categoryDescription is retrieved
    from selected data
end note

note bottom of TaskCategoryRepository
    - used for displaying
    the task category list
end note

class CreateTaskUI {
}

CreateTaskUI .> CreateTaskController

CreateTaskController ..> ApplicationSession
CreateTaskController ..> UserSession
CreateTaskController ..> TaskCategory
CreateTaskController ..> TaskCategoryRepository
CreateTaskController ..> Organization
CreateTaskController ..> OrganizationRepository
CreateTaskController .> Repositories

Repositories -> "1" Repositories : instance
Repositories --> "1" OrganizationRepository : organizationRepository
Repositories -> "1" TaskCategoryRepository : taskCategoryRepository

ApplicationSession -> "1" ApplicationSession : instance
ApplicationSession ..> UserSession

TaskCategoryRepository --> "*" TaskCategory : taskCategories

OrganizationRepository --> "*" Organization : organizations

Organization --> "*" Task : tasks
Organization --> "*" Employee : employees

Task --> "1" TaskCategory : taskCategory
Task --> "1" Employee : createdBy

class TrainConnectivityUI {
}

class TrainConnectivityController {
    + TrainConnectivityController()
    + loadRailwayData()
    + verifyTrainTravel(start, end, trainType, stationType)
    + exportToDOT(filePath)
}

class TrainConnectivityChecker {
    - stations : Map<String, Station>
    - stationOrder : List<Station>
    - graph : Map<Station, List<Edge>>
    
    + loadCSV(filePath)
    + canTravel(start, end, trainType, stationType)
    + exportToDOT(filePath)
    - validateStations(start, end)
    - validateTrainType(trainType)
    - validateStationType(stationType)
    - dfs(start, end, trainType, stationType, visited)
    - buildDOTContent()
}

class MatrixUtils {
    + {static} computeWalksMatrix(length, graph, stationOrder)
    + {static} computeTransitiveClosure(graph, stationOrder)
    - {static} initializeMatrix()
    - {static} calculatePaths()
    - {static} warshallAlgorithm()
}

class Station {
    - nameID : String
    - type : StationType
    
    + Station(nameID, type)
    + getNameID()
    + getType()
}

class Edge {
    - source : Station
    - destination : Station
    - isElectrified : boolean
    - length : double
    
    + Edge(source, destination, isElectrified, length)
    + getSource()
    + getDestination()
    + isElectrified()
    + getLength()
}

enum StationType {
    DEPOT
    STATION
    TERMINAL
}

enum TrainType {
    STEAM
    DIESEL
    ELECTRIC
}

note right of TrainConnectivityController
    Manages the interaction between UI
    and domain objects for verifying
    train travel between stations
end note

note bottom of TrainConnectivityChecker
    Implements the core logic for:
    - Loading railway data
    - Verifying train travel
    - Network visualization
end note

note right of MatrixUtils
    Utility class for matrix operations:
    - Computing walks matrix
    - Computing transitive closure
end note

TrainConnectivityUI ..> TrainConnectivityController

TrainConnectivityController --> "1" TrainConnectivityChecker : checker
TrainConnectivityController ..> MatrixUtils
TrainConnectivityController ..> Station
TrainConnectivityController ..> TrainType
TrainConnectivityController ..> StationType

TrainConnectivityChecker --> "*" Station : stations
TrainConnectivityChecker --> "*" Edge : edges
TrainConnectivityChecker ..> TrainType
TrainConnectivityChecker ..> StationType

Station --> "1" StationType : type
Edge --> "2" Station : source, destination

@enduml