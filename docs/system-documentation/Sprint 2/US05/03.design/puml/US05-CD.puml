@startuml
skinparam packageStyle rectangle
skinparam shadowing false
skinparam classAttributeIconSize 0

title Class Diagram: US05 - Build a Station

class BuildStationUI {
}

class BuildStationController {
    + create()
    + getStationTypes() : List<StationType>
    + getMapPositions() : List<Position>
    + validatePosition(position: Position) : boolean
    + buildStation(nameID: String, type: StationType, position: Position) : Station
    + validateBudget(stationType: StationType) : boolean
    + saveStation(station: Station) : boolean
}

class StationRepository {
    + save(station) : boolean
    + getStationByID(nameID) : Station
    + getStations() : List<Station>
}

class StationTypeRepository {
    + getStationTypes() : List<StationType>
    + getStationTypeByName(name) : StationType
}

class MapRepository {
    + save(map) : boolean
    + getMapByID(nameID) : Map
    + getPositions() : List<Position>
    + getAvailablePositions() : List<Position>
}

class Repositories {
    + {static} getInstance() : Repositories
    + getStationRepository() : StationRepository
    + getMapRepository() : MapRepository
    + getStationTypeRepository() : StationTypeRepository
}

class ApplicationSession {
    + {static} getInstance() : ApplicationSession
    + getCurrentSession() : Player
}

class Map {
    - nameID : String
    - positions : List<Position>
    
    + validatePosition(position: Position) : boolean
    + addStation(station: Station) : boolean
}

class Position {
    - x : int
    - y : int
    - occupied : boolean
    
    + isOccupied() : boolean
    + setOccupied(boolean) : void
}

class Player {
    - username : String
    - password : String
    - initialBudget : double
    - currentBudget : double
    
    + buildStation(nameID: String, type: StationType, position: Position) : Station
    + validateBudget(cost: double) : boolean
    + updateBudget(cost: double) : void
}

class Station {
    - nameID : String
    - storageCapacity : int
    - buildingSlots : int
    - position : Position
    - stationType : StationType
    
    + create(nameID: String, type: StationType, position: Position) : Station
}

class StationType {
    - name : String
    - economicRadius : int
    - cost : double
    - centerPoint : String
    
    + getCost() : double
    + getEconomicRadius() : int
    + getName() : String
    + getCenterPoint() : String
}

class City {
    - nameID : String
    - position : Position
}

class Industry {
    - nameID : String
    - type : String
    - position : Position
}

BuildStationUI ..> BuildStationController : uses
BuildStationController ..> StationRepository : uses
BuildStationController ..> StationTypeRepository : uses
BuildStationController ..> MapRepository : uses
BuildStationController ..> Repositories : uses
BuildStationController ..> ApplicationSession : uses
BuildStationController ..> Station : creates
BuildStationController ..> Player : uses

Map "1" -- "*" Position : contains >
Map "1" -- "*" Station : contains >
Map "1" -- "*" City : contains >
Map "1" -- "*" Industry : contains >

Station "1" -- "1" Position : located at >
Station "*" -- "1" StationType : defined by >
Station "*" -- "*" City : serves >
Station "*" -- "*" Industry : serves >

City "1" -- "1" Position : located at >
Industry "1" -- "1" Position : located at >

StationRepository --> "1" Station : returns
MapRepository --> "1" Map : returns
StationTypeRepository --> "1" StationType : returns

Repositories --> StationRepository : provides >
Repositories --> MapRepository : provides >
Repositories --> StationTypeRepository : provides >

ApplicationSession --> Player : holds >

Player "1" -- "*" Station : builds >

@enduml 