@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

title Sequence Diagram: US05 - Build a Station

actor "Player" as player
participant ":BuildStationUI" as UI
participant ":BuildStationController" as CTRL

activate player

    player -> UI : asks to build a station
        activate UI
            UI -> CTRL**: create()
            UI --> player: requests station information
        deactivate UI

    player -> UI: indicates intention to proceed
        activate UI
            UI -> CTRL: getStationTypes()
            activate CTRL
            
            ref over CTRL
            Get available station types
            end
            
                CTRL --> UI: stationTypes
            deactivate CTRL
            
            UI --> player: displays available station types
        deactivate UI

    player -> UI: selects station type
        activate UI
            UI -> CTRL: getMapPositions()
            activate CTRL
            
            ref over CTRL
            Get available map positions
            end
            
                CTRL --> UI: availablePositions
            deactivate CTRL
            
            UI --> player: displays available positions
        deactivate UI

    player -> UI: selects position and inputs station nameID
        activate UI
            UI -> CTRL: validatePosition(position)
            activate CTRL
            
            ref over CTRL
            Validate position
            end
            
                CTRL --> UI: valid
            deactivate CTRL
            
            UI -> CTRL: validateBudget(stationType)
            activate CTRL
            
            ref over CTRL
            Validate player budget
            end
            
                CTRL --> UI: valid
            deactivate CTRL
            
            UI --> player: confirms position is valid and affordable
        deactivate UI

    player -> UI: confirms data
        activate UI
            UI -> CTRL: buildStation(nameID, stationType, position)
            activate CTRL
            
            ref over CTRL
            Build and save station
            end
            
                CTRL --> UI: success + stationDetails
            deactivate CTRL
            
            UI --> player: displays operation success
            UI --> player: displays station details
        deactivate UI

deactivate player

@enduml 