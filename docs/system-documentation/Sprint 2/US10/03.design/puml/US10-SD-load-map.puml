@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
autonumber 7

participant ":EditMapController" as mapCTRL
participant "ApplicationSession" as APP_SESSION
participant "appSession\n:ApplicationSession" as APP_SESSION_SINGLETON
participant "mapRepository\n:MapRepository" as REPOS_MAP
participant "map\n:Map" as MAP

-> mapCTRL: loadMap(selectedMap)
activate mapCTRL
autonumber 7.1
group Load map
    mapCTRL -> APP_SESSION: getInstance()
        activate APP_SESSION
            APP_SESSION --> mapCTRL: appSession
        deactivate APP_SESSION

    mapCTRL -> APP_SESSION_SINGLETON: setCurrentMap(selectedMap)
        activate APP_SESSION_SINGLETON
            APP_SESSION_SINGLETON --> mapCTRL: success
        deactivate APP_SESSION_SINGLETON

    mapCTRL -> REPOS_MAP: getMap(selectedMap)
        activate REPOS_MAP
            REPOS_MAP --> mapCTRL: map
        deactivate REPOS_MAP

    mapCTRL -> MAP: getMapLayout()
        activate MAP
            MAP --> mapCTRL: mapLayout
        deactivate MAP
end
autonumber 8

<-- mapCTRL: mapLayout

deactivate mapCTRL

@enduml 