@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

title Sequence Diagram (Partial): US06 - Request Available Upgrades

actor "Player" as player
participant ":UpgradeStationUI" as UI
participant ":UpgradeStationController" as CTRL
participant "Repositories" as REPOS
participant "repositories\n:Repositories" as REPOS_SINGLETON
participant "ApplicationSession" as APP_SESSION
participant "stationRepository\n:StationRepository" as REPOS_STATION
participant ":station\nStation" as station

activate player

    player -> UI: asks to upgrade station
        activate UI
        UI -> CTRL**: create()
            UI -> CTRL: getAvailableUpgrades()
            activate CTRL

            CTRL -> REPOS: getInstance()
                activate REPOS
                    REPOS --> CTRL: repositories
                deactivate REPOS

            CTRL -> REPOS_SINGLETON: getStationRepository()
                activate REPOS_SINGLETON
                    REPOS_SINGLETON --> CTRL: stationRepository
                deactivate REPOS_SINGLETON

            CTRL -> APP_SESSION: getInstance()
                activate APP_SESSION
                    APP_SESSION --> CTRL: stationId = appSession
                deactivate APP_SESSION

            CTRL -> REPOS_STATION: getStation(stationId)
                activate REPOS_STATION
                    REPOS_STATION --> CTRL: station
                deactivate REPOS_STATION

            CTRL -> station: getAvailableUpgrades(station)
                activate station
                station --> CTRL: availableUpgrades
                deactivate station
            CTRL --> UI: availableUpgrades
            deactivate CTRL
        UI --> player: displays upgrade options
        deactivate UI

deactivate player

@enduml 