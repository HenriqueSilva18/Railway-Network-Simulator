@startuml us07_select_map

skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
autonumber

title System Sequence Diagram: US07 - Select a Map

actor Player
participant ListStationUI
participant ListStationController
participant "ApplicationSession" as APP_SESSION
participant "appSession\n:ApplicationSession" as APP_SESSION_SINGLETON
participant "currentSession\n:UserSession" as CURRENT_SESSION
participant Repositories
participant MapRepository

activate Player
Player -> ListStationUI : listStations()
activate ListStationUI
ListStationUI -> ListStationController : listAvailableMaps()
activate ListStationController

ListStationController -> APP_SESSION : getInstance()
activate APP_SESSION
APP_SESSION --> ListStationController : appSession
deactivate APP_SESSION

ListStationController -> APP_SESSION_SINGLETON : getCurrentSession()
activate APP_SESSION_SINGLETON
APP_SESSION_SINGLETON --> ListStationController : currentSession
deactivate APP_SESSION_SINGLETON

ListStationController -> CURRENT_SESSION : getCurrentEditor()
activate CURRENT_SESSION
CURRENT_SESSION --> ListStationController : currentEditor
deactivate CURRENT_SESSION

ListStationController -> Repositories : getInstance()
activate Repositories
Repositories --> ListStationController : repositories
deactivate Repositories

ListStationController -> Repositories : mapRepository()
activate Repositories
Repositories --> ListStationController : mapRepository
deactivate Repositories

ListStationController -> MapRepository : getAllMaps()
activate MapRepository
MapRepository --> ListStationController : list of maps
deactivate MapRepository

ListStationController --> ListStationUI : list of maps
deactivate ListStationController
ListStationUI -> Player : show available maps
deactivate ListStationUI
deactivate Player

@enduml
