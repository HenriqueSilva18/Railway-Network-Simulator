@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber 7

participant ":MapController" as CTRL
participant "mapRepository\n:MapRepository" as REPOS_MAP
participant "map\n:Map" as MAP
participant ":ApplicationSession" as APP_SESSION
participant "appSession\n:ApplicationSession" as APP_SESSION_SINGLETON

-> CTRL: loadMap(selectedMap)
activate CTRL
autonumber 7.1
    group Load selected map


        CTRL -> APP_SESSION: getInstance()
        activate APP_SESSION
            APP_SESSION --> CTRL:appSession
        deactivate APP_SESSION

        CTRL -> APP_SESSION_SINGLETON: setCurrentMap(selectedMap)
        activate APP_SESSION_SINGLETON
            APP_SESSION_SINGLETON --> CTRL: success
        deactivate APP_SESSION_SINGLETON


        CTRL -> REPOS_MAP: getMap(selectedMap)
        activate REPOS_MAP
            REPOS_MAP --> CTRL: map
        deactivate REPOS_MAP

        CTRL -> MAP: getMapLayout()
        activate MAP
            MAP --> CTRL: mapLayout
        deactivate MAP

    end
    autonumber 8
    <-- CTRL : mapLayout
deactivate CTRL

@enduml