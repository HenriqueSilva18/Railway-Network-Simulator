@startuml

skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
autonumber

title System Sequence Diagram : Ref - Get available maps

participant AddCityController
participant Repositories
participant "repositories\n:Repositories" as REPOS_SINGLETON
participant "mapRepository\n:MapRepository" as REPOS_MAP
participant "ApplicationSession" as APP_SESSION

        autonumber 2

activate AddCityController
--> AddCityController: getAvailableMaps()
        autonumber 2.1

group GetAvailableMaps
    AddCityController -> APP_SESSION: getInstance()
    activate APP_SESSION
        APP_SESSION --> AddCityController: appSession
    deactivate APP_SESSION

    AddCityController -> REPOS_SINGLETON: getInstance()
    activate REPOS_SINGLETON
        REPOS_SINGLETON --> AddCityController: repositories
    deactivate REPOS_SINGLETON
    
    AddCityController -> REPOS_SINGLETON: mapRepository()
    activate REPOS_SINGLETON
        REPOS_SINGLETON --> AddCityController: mapRepository
    deactivate REPOS_SINGLETON

    AddCityController -> REPOS_MAP: getMaps()
    activate REPOS_MAP
        REPOS_MAP --> AddCityController: availableMapsList
    deactivate REPOS_MAP
end
        autonumber  3

<--AddCityController : availableMapsList
deactivate AddCityController

@enduml