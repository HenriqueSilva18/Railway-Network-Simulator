@startuml


top to bottom direction

skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
skinparam classAttributeIconSize 0

title Class Diagram: US03 - Add a city

class ApplicationSession {
  -ApplicationSession()
  +getInstance()
  +getCurrentSession()
}

' Main controller class
class AddCityController {
  +getAvailableMaps() : List<Map>
  +validateName(name : String) : string
  +validateCoordinates(x : float, y : float) Coordinate
  +validateNumBlocks(number : int) : int
  +saveCity(name : String, coordinates : Point, houseBlocks : HouseBlock ) : City
}

' Controller for house blocks management
class AddHouseBlocksController {
  +assignBlocks(numBlocks) : List<HouseBlock>
}

' Repository classes
class Repositories {
    -mapRepository : MapRepository
  +getInstance()
  +mapRepository()
}

class MapRepository {
  +getMaps()
  +saveMap(map : Map)
  +getCurrentMap(cMap : Map) : Map
}

' Domain classes
class City {
  -name: String
  -xAxis: float
    -yAxis: float
  -houseBlocks: List<HouseBlock>
  +City(name , coordinate, houseBlocks)
  +addBlocks(blocks)
}

class Map {
  -name : String
  -cities : List<City>
  +addCity(city)
}

class HouseBlock {
    -xAxis: float
    -yAxis: float
 +setHouseBlockCoordinate(coordinates)
}

' UI class
class AddCityUI {
}

' Relationships
AddCityController .> ApplicationSession
Repositories --> MapRepository : mapRepository
AddCityController .> Repositories
AddCityController .> City
AddCityController .> Map
AddCityController .> MapRepository
AddHouseBlocksController .> HouseBlock
AddCityUI .> AddCityController
AddCityUI .> AddHouseBlocksController
Map "1" *-- "1..*" City : contains
City "1" *-- "1..*" HouseBlock : contains

@enduml