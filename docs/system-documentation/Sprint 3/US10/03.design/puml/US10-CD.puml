@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline

skinparam classAttributeIconSize 0

' UI Layer
class AssignTrainUI {
    + create()
    + getAvailableRoutes()
    + getRouteDetails()
    + getRoutePoints()
    + getAvailableTrains()
    + getTrainDetails()
    + assignTrainToRoute()
}

' Controller Layer
class AssignTrainController {
    + create()
    + getAvailableRoutes()
    + getRouteDetails(routeDTO: RouteDTO)
    + getRoutePoints(routeDTO: RouteDTO)
    + setCargoMode(pointOfRouteDTO: PointOfRouteDTO)
    + getAvailableTrains()
    + getTrainDetails(trainDTO: TrainDTO)
    + assignTrainToRoute(routeDTO: RouteDTO, trainDTO: TrainDTO)
}

' Repository Layer
class RouteRepository {
    + getListOfRoutes()
    + getRoute(id: int)
    + getRoutePoints(routeId: int)
}

class TrainRepository {
    + getListOfTrains()
    + getTrain(id: int)
}

' Domain Layer
class Routes {
    + getListOfRoutes()
    + getRoute(id: int)
    + getRoutePoints(routeId: int)
}

class Trains {
    + getListOfTrains()
    + getTrain(id: int)
}

class Route {
    - id: int
    - name: String
    - points: List<PointOfRoute>
    + getPointOfRoute(pointId: int)
    + assignTrain(train: Train)
    + validateTrainAssignment(train: Train)
}

class Train {
    - id: int
    - name: String
    - route: Route
    + setRoute(route: Route)
}

class PointOfRoute {
    - id: int
    - routeId: int
    - cargoMode: CargoMode
    + setCargoMode(cargoMode: CargoMode)
}

enum CargoMode {
    FULL
    HALF
    AVAILABLE
}

' DTO Layer
class RouteDTO {
    - id: int
    - name: String
}

class RouteDetailsDTO {
    - id: int
    - name: String
    - points: List<PointOfRouteDTO>
}

class PointOfRouteDTO {
    - id: int
    - routeId: int
    - cargoMode: CargoMode
}

class TrainDTO {
    - id: int
    - name: String
}

class TrainDetailsDTO {
    - id: int
    - name: String
    - route: RouteDTO
}

class TrainRouteAssignmentDTO {
    - route: RouteDTO
    - train: TrainDTO
    - points: List<PointOfRouteDTO>
}

' Mapper Layer
class RouteMapper {
    + toDTO(route: Route)
    + toDetailsDTO(route: Route)
    + updatePointOfRouteDTO(point: PointOfRoute)
    + createAssignmentDTO(route: Route, train: Train)
}

class TrainMapper {
    + toDTO(train: Train)
    + toDetailsDTO(train: Train)
}

class PointOfRouteMapper {
    + toDTO(point: PointOfRoute)
}

' Relationships
AssignTrainUI --> AssignTrainController
AssignTrainController --> RouteRepository
AssignTrainController --> TrainRepository
AssignTrainController --> RouteMapper
AssignTrainController --> TrainMapper
AssignTrainController --> PointOfRouteMapper

RouteRepository --> Routes
TrainRepository --> Trains

Routes --> Route
Trains --> Train
Route --> PointOfRoute
Route --> Train

RouteMapper --> RouteDTO
RouteMapper --> RouteDetailsDTO
RouteMapper --> PointOfRouteDTO
RouteMapper --> TrainRouteAssignmentDTO

TrainMapper --> TrainDTO
TrainMapper --> TrainDetailsDTO

PointOfRouteMapper --> PointOfRouteDTO

PointOfRoute --> CargoMode

@enduml
