<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<BorderPane fx:id="playerMainPane" prefHeight="1080.0" prefWidth="1920.0" style="-fx-background-color: linear-gradient(to bottom, #667eea 0%, #764ba2 100%);" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="pt.ipp.isep.dei.ui.gui.controller.PlayerMenuGUIController">

    <!-- Header com informaÃ§Ãµes do jogador -->
    <top>
        <VBox style="-fx-background-color: rgba(255, 255, 255, 0.15); -fx-border-color: rgba(255, 255, 255, 0.3); -fx-border-width: 0 0 1 0;">
            <children>
                <!-- Barra de Menu Estilizada -->
                <MenuBar style="-fx-background-color: transparent; -fx-border-width: 0;">
                    <menus>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="ðŸ“ File">
                            <items>
                                <MenuItem fx:id="selectMapScenarioMenuItem" mnemonicParsing="false" onAction="#handleSelectMapScenario" text="ðŸ—ºï¸ Select Map and Scenario..." />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="saveGameMenuItem" mnemonicParsing="false" onAction="#handleSaveGame" text="ðŸ’¾ Save Game" />
                                <MenuItem fx:id="loadGameMenuItem" mnemonicParsing="false" onAction="#handleLoadGame" text="ðŸ“‚ Load Game" />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="logoutMenuItem" mnemonicParsing="false" onAction="#handleLogout" text="ðŸšª Logout" />
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="ðŸ”§ Manage">
                            <items>
                                <MenuItem fx:id="buildStationMenuItem" mnemonicParsing="false" onAction="#handleBuildStation" text="ðŸ—ï¸ Build Station..." />
                                <MenuItem fx:id="upgradeStationMenuItem" mnemonicParsing="false" onAction="#handleUpgradeStation" text="â¬†ï¸ Upgrade Station..." />
                                <MenuItem fx:id="buildRailwayLineMenuItem" mnemonicParsing="false" onAction="#handleBuildRailwayLine" text="ðŸ›¤ï¸ Build Railway Line..." />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="buyLocomotiveMenuItem" mnemonicParsing="false" onAction="#handleBuyLocomotive" text="ðŸš‚ Buy Locomotive..." />
                                <MenuItem fx:id="createRouteMenuItem" mnemonicParsing="false" onAction="#handleCreateRoute" text="ðŸ—ºï¸ Create Route..." />
                                <MenuItem fx:id="assignTrainMenuItem" mnemonicParsing="false" onAction="#handleAssignTrainToRoute" text="ðŸ”— Assign Train to Route..." />
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="ðŸ‘ï¸ View">
                            <items>
                                <MenuItem fx:id="viewCurrentMapMenuItem" mnemonicParsing="false" onAction="#handleViewCurrentMap" text="ðŸ—ºï¸ View Current Map" />
                                <MenuItem fx:id="listStationsMenuItem" mnemonicParsing="false" onAction="#handleListStations" text="ðŸ¢ View Stations Details" />
                                <MenuItem fx:id="listTrainsMenuItem" mnemonicParsing="false" onAction="#handleListTrains" text="ðŸš† View Trains" />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="viewConnectivityMenuItem" mnemonicParsing="false" onAction="#handleViewConnectivity" text="ðŸ”— Check Network Connectivity..." />
                                <MenuItem fx:id="viewMaintenanceRouteMenuItem" mnemonicParsing="false" onAction="#handleViewMaintenanceRoute" text="ðŸ”§ View Maintenance Route..." />
                                <MenuItem fx:id="viewShortestRouteMenuItem" mnemonicParsing="false" onAction="#handleViewShortestRoute" text="ðŸ“ Find Shortest Route..." />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="viewFinancialResultsMenuItem" mnemonicParsing="false" onAction="#handleViewFinancialResults" text="ðŸ’° View Year Financial Results" />
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="â–¶ï¸ Simulator">
                            <items>
                                <MenuItem fx:id="runPauseSimulatorMenuItem" mnemonicParsing="false" onAction="#handleRunPauseSimulator" text="â¯ï¸ Play/Pause Simulator" />
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="ðŸ“Š Statistics">
                            <items>
                                <MenuItem fx:id="stationProfitAnalysisMenuItem" mnemonicParsing="false" onAction="#handleStationProfitAnalysis" text="ðŸ’¹ Station Profit Analysis..." />
                                <MenuItem fx:id="passengerArrivalsAnalysisMenuItem" mnemonicParsing="false" onAction="#handlePassengerArrivalsAnalysis" text="ðŸ‘¥ Passenger Arrivals Analysis..." />
                                <MenuItem fx:id="cargoArrivalsAnalysisMenuItem" mnemonicParsing="false" onAction="#handleCargoArrivalsAnalysis" text="ðŸ“¦ Cargo Arrivals Analysis..." />
                                <MenuItem fx:id="distributionAnalysisMenuItem" mnemonicParsing="false" onAction="#handleDistributionAnalysis" text="ðŸ“ˆ Distribution Analysis..." />
                                <MenuItem fx:id="cargoRevenueAnalysisMenuItem" mnemonicParsing="false" onAction="#handleCargoRevenueAnalysis" text="ðŸ’° Cargo Revenue Correlation..." />
                            </items>
                        </Menu>
                        <Menu mnemonicParsing="false" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;" text="â“ Help">
                            <items>
                                <MenuItem fx:id="aboutMenuItem" mnemonicParsing="false" onAction="#handleAbout" text="â„¹ï¸ About" />
                            </items>
                        </Menu>
                    </menus>
                </MenuBar>

                <!-- Header de Boas-vindas -->
                <HBox alignment="CENTER" spacing="20.0" style="-fx-background-color: rgba(255, 255, 255, 0.1);">
                    <padding>
                        <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
                    </padding>
                    <children>
                        <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="ðŸš‚ Railway Management System" />
                        <Pane HBox.hgrow="ALWAYS" />
                        <VBox alignment="CENTER_RIGHT" spacing="5.0">
                            <children>
                                <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Welcome, Player!" />
                                <Label style="-fx-font-size: 12px; -fx-text-fill: rgba(255, 255, 255, 0.8); -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Manage your railway empire" />
                            </children>
                        </VBox>
                    </children>
                </HBox>
            </children>
        </VBox>
    </top>

    <!-- Ãrea de conteÃºdo principal -->
    <center>
        <ScrollPane fitToHeight="true" fitToWidth="true" style="-fx-background: transparent; -fx-background-color: transparent;">
            <content>
                <VBox alignment="TOP_CENTER" spacing="30.0" style="-fx-background-color: transparent;">
                    <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                    </padding>
                    <children>
                        <!-- Cards de AÃ§Ãµes Principais -->
                        <GridPane alignment="CENTER" hgap="20.0" prefHeight="400.0" prefWidth="1858.0" vgap="20.0">
                            <columnConstraints>
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="300.0" prefWidth="300.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="300.0" prefWidth="300.0" />
                                <ColumnConstraints hgrow="SOMETIMES" minWidth="300.0" prefWidth="300.0" />
                            </columnConstraints>
                            <rowConstraints>
                                <RowConstraints minHeight="120.0" prefHeight="120.0" vgrow="SOMETIMES" />
                                <RowConstraints minHeight="120.0" prefHeight="120.0" vgrow="SOMETIMES" />
                            </rowConstraints>

                            <!-- Card 1: Manage Infrastructure -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/worker.png"/>                                        </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Manage Infrastructure" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Build stations, upgrade facilities, and expand your railway network" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>

                            <!-- Card 2: Fleet Management -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/train1.png"/>                                        </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Fleet Management" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Purchase locomotives, create routes, and manage train assignments" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>

                            <!-- Card 3: Network Analysis -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/world_map.png"/>                                     </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Network Analysis" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="View maps, check connectivity, and find optimal routes" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>

                            <!-- Card 4: Simulation Control -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/start_pause.png"/>                                        </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Simulation Control" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Start, pause, and control the railway simulation system" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>

                            <!-- Card 5: Financial Reports -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/bag_money.png"/>                                        </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Financial Reports" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="View financial results and analyze business performance" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>

                            <!-- Card 6: Statistics & Analytics -->
                            <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                                          -fx-background-radius: 15px;                                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 5);                                          -fx-cursor: hand;" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/chart.png"/>                                        </image>
                                    </ImageView>
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Statistics and Analytics" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Analyze performance metrics, passenger flows, and revenue data" textAlignment="CENTER" wrapText="true" />
                                </children>
                            </VBox>
                        </GridPane>

                        <!-- Ãrea dinÃ¢mica de conteÃºdo -->
                        <StackPane fx:id="contentArea" prefHeight="200.0">
                            <padding>
                                <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                            </padding>
                            <children>
                                <VBox alignment="CENTER" spacing="15.0">
                                    <children>
                                        <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Ready to Build Your Railway Empire?" />
                                        <Label maxWidth="800.0" style="-fx-font-size: 14px; -fx-text-fill: #11220f; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Select an option from the menu above or click on one of the cards to get started with managing your railway system." textAlignment="CENTER" wrapText="true" />
                                    </children>
                                </VBox>
                            </children>
                        </StackPane>
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- Barra de status inferior -->
    <bottom>
        <HBox alignment="CENTER_LEFT" prefHeight="50.0" spacing="20.0" style="-fx-background-color: rgba(255, 255, 255, 0.95);                      -fx-border-color: rgba(0, 0, 0, 0.1);                      -fx-border-width: 1 0 0 0;                      -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, -2);">
            <padding>
                <Insets left="20.0" right="20.0" />
            </padding>
            <children>
                <!-- Budget Section -->
                <HBox alignment="CENTER_LEFT" spacing="8.0" style="-fx-background-color: rgba(102, 126, 234, 0.1);                              -fx-background-radius: 20px;                              -fx-padding: 8px 15px;">
                    <children>
                        <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                            <image>
                                <Image url="@../images/bag_money.png"/>
                            </image>
                        </ImageView>
                        <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Budget:" />
                        <Label fx:id="budgetLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #667eea; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="N/A" />
                    </children>
                </HBox>

                <Pane HBox.hgrow="ALWAYS" />

                <!-- Simulator Time Section -->
                <HBox alignment="CENTER_RIGHT" spacing="8.0" style="-fx-background-color: rgba(118, 75, 162, 0.1);                              -fx-background-radius: 20px;                              -fx-padding: 8px 15px;">
                    <children>
                        <ImageView fitHeight="36.0" fitWidth="36.0" preserveRatio="true">
                            <image>
                                <Image url="@../images/clock.png"/>                                        </image>
                        </ImageView>
                        <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Simulator Time:" />
                        <Label fx:id="simulatorTimeLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #764ba2; -fx-font-family: 'Segoe UI', 'Arial', sans-serif;" text="Paused" />
                    </children>
                </HBox>
            </children>
        </HBox>
    </bottom>
</BorderPane>
